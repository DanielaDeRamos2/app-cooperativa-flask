{% extends 'base.html' %}

{% block title %}Carrinho{% endblock %}

{% block content %}
<div class="container page-card">
  <h1 class="page-title">Seu Carrinho</h1>

  {% if carrinho and carrinho|length > 0 %}
  <div class="cart-list">
    {% for id, item in carrinho.items() %}
      <div class="cart-item">
        <div class="cart-media">
          {% if item.foto_url %}
            <img src="{{ item.foto_url }}" alt="{{ item.nome }}">
          {% endif %}
        </div>
        <div class="cart-body">
          <div class="cart-title">{{ item.nome }}</div>
          <div class="cart-controls">
            <form action="/carrinho/editar/{{ id }}" method="post" class="inline-form">
              <input class="form-control" type="number" name="quantidade" value="{{ item.quantidade }}" step="0.1">
              <button class="btn btn-secondary" type="submit">Atualizar</button>
            </form>
            <a class="btn btn-ghost" href="/carrinho/remover/{{ id }}">Remover</a>
          </div>
        </div>
        <div class="cart-price">R$ {{ item.preco * item.quantidade }}</div>
      </div>
    {% endfor %}
  </div>

  <div class="cart-summary">
    <div class="summary-row"><strong>Total:</strong> R$ {{ total }}</div>
    <a class="btn btn-primary" href="/pedidos/checkout">Finalizar Pedido</a>
  </div>

  {% else %}
    <p>Seu carrinho est√° vazio.</p>
  {% endif %}
</div>
{% endblock %}
