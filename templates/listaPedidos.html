{% extends 'base.html' %}

{% block title %}Pedidos – {{ status }}{% endblock %}

{% block content %}
<div class="container page-card">
  <h1 class="page-title">Pedidos – {{ status }}</h1>

  <form method="GET" class="inline-form mb-16">
    <select class="form-control" name="status" onchange="this.form.submit()">
      <option>Aguardando confirmação</option>
      <option>Em preparação</option>
      <option>Pronto para retirada/entrega</option>
      <option>Concluído</option>
      <option>Cancelado</option>
    </select>
  </form>

  <div class="table-like">
    <div class="table-row table-head"><div>ID</div><div>Cliente</div><div>Total</div><div>Ações</div></div>
    {% for p in pedidos %}
    <div class="table-row">
      <div>{{ p.id }}</div>
      <div>{{ p.cliente.nome }}</div>
      <div>R$ {{ p.total }}</div>
      <div>
        <form action="/admin/pedidos/status/{{ p.id }}" method="post" class="inline-form">
          <select class="form-control" name="status">
            <option value="Aguardando confirmação">Aguardando</option>
            <option value="Em preparação">Preparando</option>
            <option value="Pronto para retirada/entrega">Pronto</option>
            <option value="Concluído">Concluído</option>
            <option value="Cancelado">Cancelar</option>
          </select>
          <button class="btn btn-secondary" type="submit">OK</button>
        </form>
        <a class="btn btn-ghost" href="/admin/pedidos/divisao/{{ p.id }}">Ver divisão</a>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
